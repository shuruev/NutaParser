// возможно убрать state.Deep
// in и out в типах
